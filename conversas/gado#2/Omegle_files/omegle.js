function setCollegeMode(a){collegeMode=a,Cookie.write("collegemode",collegeMode,{duration:365,domain:document.domain,path:"/"})}function clearCollegeSetting(){Cookie.write("college","",{duration:365,domain:document.domain,path:"/"}),Cookie.write("collegemode","",{duration:365,domain:document.domain,path:"/"}),collegeAndAuth=null,collegeMode="any"}function middotify(a){for(var b=new Element("span"),c=0;c<a.length;c++)c>0&&b.appendText(" • "),b.grab(a[c]);return b}function startFirstChat(a,b,c,d,e){IS_MOBILE?((document.scrollingElement||document.documentElement).scrollTop=100,logoElt=$("logo"),savedHeader=$("header"),$("header").dispose(),contentTop=0):(contentTop=$("intro").offsetTop,$$("#headerappstore").setStyle("visibility","visible")),firstChatTrackCode&&((new Image).src="http://wawadmin.omegle.com/redir/hometest?track="+(e?"unmon-"+(shouldForceUnmonitored?"":"not")+"forced-":"mon-")+(a?"videoy-":"videon-")+encodeURIComponent(firstChatTrackCode)),savedIntro=$("intro"),$("google_translate_upper_container")&&$("google_translate_upper_container").grab&&$("google_translate_wrapper")&&$("google_translate_upper_container").grab($("google_translate_wrapper")),$("intro").dispose();for(var f=Array.prototype.slice.call(arguments);f.length<5;)f.push(void 0);f.push(!0),startNewChat.apply(null,f)}function showIntro(){if(savedHeader&&!$("header")&&(logoElt&&savedHeader.grab(logoElt,"top"),$(document.body).grab(savedHeader)),savedIntro&&$(document.body).grab(savedIntro),IS_MOBILE)for(var a=0;300>=a;a+=50)setTimeout(function(){scrollTo(0,1)},a);else $$("#headerappstore").setStyle("visibility","hidden");mobileAdWrapper&&$("mobileadwrapper2")&&mobileAdWrapper.setStyles({display:"block",top:$("mobileadwrapper2").getPosition().y+"px"});var b=makeTopicSettings(!0);$("topicsettingscontainer")&&($("topicsettingscontainer").empty(),$("topicsettingscontainer").grab(b))}function commify(a){var b,c="";do{for(b=(a%1e3).toString(),a=Math.floor(a/1e3);0!=a&&b.length<3;)b="0"+b;c=b+c,a&&(c=","+c)}while(0!=a);return c}function onlineCountUpdated(a){var b=$("onlinecount");if(b&&void 0!==a&&null!==a&&!isNaN(a)){a=1e3*Math.floor(a/1e3);var c="<strong>"+commify(a)+"+</strong> online now";b.set("html",c)}}function randomSpyMode(){return Math.random()<.25?"spy":"spyee"}function forceUnmon(){if(!IS_MOBILE&&!shouldForceUnmonitored){shouldForceUnmonitored=!0;var a=$("intro")||savedIntro;if(a){a.getElementById("monitoringnotice")&&a.getElementById("monitoringnotice").dispose();var b=new Element("div",{id:"monitoringnotice"});a.getElementById("chattypes").grab(b,"before"),b.addClass("banned");var c=new Element("p",{html:"Your computer/network is <strong>banned</strong> for possible bad behavior."}),d=new Element("p",{"class":"extrainfo",html:"<strong>You can still use Omegle</strong>, but only the unmonitored section. <strong>You must be 18 or older.</strong>"}),e=new Element("p",{"class":"extrainfo",html:"(If you didn't do anything wrong, sorry! Mistakes happen sometimes. Your ban won't last forever.)"});b.grab(c),b.grab(d),b.grab(e),a.getElements("#tryspymode, #intoheadercell, #topicsettingscell, #spymodebtn, #videobtnunmoderated").dispose();var f="/static/pornbtn";f+=window.devicePixelRatio&&window.devicePixelRatio>1?"@2x.png?xx":".png?xx";var g=new Element("img",{src:f,width:124,height:50,id:"girlsbtn"}),h=new Element("td");h.grab(g);var i=firstChatTrackCode?"-"+firstChatTrackCode:"";g.addEvent("click",function(){window.open("http://wawadmin.omegle.com/redir/y?track=homepage-ban"+i)});var j=new Element("td",{"class":"chattypeorcell",text:"or"}),k="/static/gaybtnorange";k+=window.devicePixelRatio&&window.devicePixelRatio>1?"@2x.png":".png";var l=new Element("img",{src:k,width:124,height:50,id:"gaybtn"}),m=new Element("td");m.grab(l),l.addEvent("click",function(){window.open("http://wawadmin.omegle.com/redir/gay?track=homepage-ban")});var n=(new Element("td",{"class":"chattypeorcell",text:"or"}),new Element("tr"));n.grab(h),n.grab(j),n.grab(m),a.getElement("#chattypes tbody").grab(n),$("videobtn").set("src",$("videobtn").get("src").replace("-disabled","-enabled")),$("videobtnstatus").set("html","&nbsp;")}}}function updateServerStatus(){serverStatusTimeout&&(clearTimeout(serverStatusTimeout),serverStatusTimeout=null);var a=serverManager.pickServer();subdomainManager.subdomainWindow(a,function(b){killHeaders(new b.Request.JSON({url:subdomainManager.fixUrl(a,"/status"),onSuccess:function(a){gotServerStatus(a)},onFailure:function(){serverManager.unsetKnownGood(),serverStatusTimeout=setTimeout(updateServerStatus,1500)}})).get({nocache:Math.random(),randid:randID})})}function gotServerStatus(a){serverStatusTimeout&&(clearTimeout(serverStatusTimeout),serverStatusTimeout=null),onlineCountUpdated(a.count),idealSpyMode=a.spyQueueTime-a.spyeeQueueTime>1?"spyee":"spy",a.timestamp&&timeManager.gotAccurateTime(new Date(1e3*a.timestamp)),a.servers&&a.servers.length&&serverManager.setServerList(a.servers),antinudeServers=a.antinudeservers||[],screenshotPercent=a.antinudepercent||0,a.force_unmon&&forceUnmon(),firstStatusUpdate=!1,serverStatusTimeout=setTimeout(updateServerStatus,9e4),a.rtmfp&&a.rtmfp.length&&(rtmfpServer=a.rtmfp)}function loadTumblrTags(a,b){var c=serverManager.pickServer();subdomainManager.subdomainWindow(c,function(d){killHeaders(new d.Request.JSON({url:subdomainManager.fixUrl(c,"/tumblr_tags"),onSuccess:function(a){b(a)},onFailure:function(){b({success:!1,error:"Error reaching server."})}})).post({username:a})})}function processTumblrTags(a,b){b||(b=20);for(var c=[],d={},e=0;e<a.length;e++){var f=a[e],g=topicManager.normalize(f);d[g]?(d[g].count++,f.length>d[g].format.length&&(d[g].format=f)):(d[g]={count:1,format:f},c.push(g))}c.sort(function(a,b){var c=d[a].count,e=d[b].count;if(c!==e)return e-c;var f=Math.abs(a.length-10),g=Math.abs(b.length-10);return f-g});for(var h=[],e=0;e<Math.min(b,c.length);e++)h.push(d[c[e]].format);return h}function setShouldUseLikes(a){shouldUseLikes=a,Cookie.write("uselikes",a?"1":"0",{duration:365,domain:document.domain,path:"/"})}function setShouldUseEnglish(a){shouldUseEnglish=a,Cookie.write("useenglish",a?"1":"0",{duration:365,domain:document.domain,path:"/"})}function makeShouldUseLikesCheckbox(){var a=new Element("label"),b=new Element("input",{type:"checkbox",checked:shouldUseLikes,"class":"shoulduselikescheckbox"});return b.addEvent("change",function(){setShouldUseLikes(b.checked)}),a.grab(b),a.appendText(" Find strangers with common interests"),a}function makeCollegeCheckboxes(a){var b=new Element("div");if(a){var c=new Element("div");c.setStyle("font-weight","bold"),c.set("text","College: "),c.appendText(collegeAndAuth[0]),c.appendText(" "),c.grab(a),b.grab(c)}var d=new Element("label"),e=new Element("input",{type:"checkbox"});e.addEvent("change",function(){g.checked=!1,setCollegeMode(e.checked?"my":"none")}),d.grab(e),a?d.appendText(" Find strangers from my college"):d.appendText(" "+collegeAndAuth[0]),b.grab(d),a?b.grab(new Element("br")):b.appendText(" ");var f=new Element("label"),g=new Element("input",{type:"checkbox"});return g.addEvent("change",function(){e.checked=!1,setCollegeMode(g.checked?"any":"none")}),f.grab(g),f.appendText(" Any college"),b.grab(f),"my"===collegeMode?e.checked=!0:"any"===collegeMode&&(g.checked=!0),b}function makeCollegeEmailForm(a){var b=new Element("div"),c=["<strong>College student</strong> chat","<strong>College student</strong> chat"],d=Math.floor(Math.random()*c.length),e=new Element("div"),f=new Element("a",{html:c[d],href:"javascript:",events:{click:function(a){a.preventDefault(),b.grab(g),k.focus(),e.dispose(),(new Image).src="http://wawadmin.omegle.com/redir/hometest?track=college39-"+d}}});f.setStyles({display:"block","margin-top":"0.5em",border:"1px solid #CCC",background:"#EEE",color:"black","text-align":a?"center":"left","text-decoration":"none",padding:"0.25em","border-radius":"0.5em",position:"relative"}),f.setStyle("padding-left",a?"0.25em":"2em"),f.grab(new Element("span",{text:"▶",styles:{position:"absolute",left:"1em",top:"0"}}),"top"),e.grab(f),b.grab(e);var g=new Element("form",{styles:{margin:0,padding:0,"text-align":"justify"},events:{submit:function(a){function b(a,b){m.setStyle("color",a?"green":"red");var c=b.split("\n");m.empty();for(var d=0;d<c.length;d++)m.grab(new Element("div",{text:c[d]}));k.set("disabled",!1),l.set("disabled",!1),k.set("value","")}a.preventDefault(),m.empty(),k.set("disabled",!0),l.set("disabled",!0);var c=serverManager.pickServer();subdomainManager.subdomainWindow(c,function(a){killHeaders(new a.Request.JSON({url:subdomainManager.fixUrl(c,"/send_email"),onSuccess:function(a){(new Image).src="http://wawadmin.omegle.com/redir/hometest?track=collegex39-"+d,b(a.success,a.msg)},onFailure:function(){b(!1,"Technical error. Sorry. :(")}})).post({email:k.get("value")})})}}});g.setStyle("margin-top","1em");var h=new Element("div",{styles:{"font-size":"0.9em"}});h.set("html","Please enter a college email address <strong>ending in .edu or .edu.XX or .ac.XX</strong> to verify you're in college. This will allow you to chat with other college students."),g.grab(h);var i=new Element("div",{styles:{"text-align":a?"center":"left"}}),j=new Element("label"),k=new Element("input",{type:"text",size:"35"});j.grab(k),i.grab(j);var l=new Element("input",{type:"submit",value:"Go"});i.appendText(" "),i.grab(l),g.grab(i);var m=new Element("div",{styles:{"text-align":a?"center":"left"}});g.grab(m);var n=new Element("div",{styles:{"font-size":"0.9em"}});return n.set("html","<strong>We WON'T spam you, sell your address, or save it.</strong><br>We'll email you to verify your college address, and that's all. Other users won't see your address, only the domain (the part after the @ sign)."),g.grab(n),b}function unmonitoredConfirm(){return confirm("Because this section is not moderated, you are more likely to encounter sexual behavior. As with the rest of Omegle, users in this section are solely responsible for their own behavior.\n\nIF YOU ARE UNDER 18, or you would prefer not to use this section, press CANCEL. By pressing OK, you affirm that you are at least 18 years old.")}function startUnmonitoredVideo(){unmonitoredConfirm()&&startFirstChat(!0,void 0,void 0,void 0,!0)}function basicReady(){if(!basicReadyCalled){if(basicReadyCalled=!0,$("feedback")){var a=$$("#feedback h2");"#feedback"==location.hash?($("feedback").addClass("expanded"),$("feedbackmessage").focus()):$("feedback").addClass("collapsed"),a.addEvent("needsclick"),a.addEvent("click",function(){$("feedback").hasClass("expanded")?($("feedback").removeClass("expanded"),$("feedback").addClass("collapsed")):($("feedback").removeClass("collapsed"),$("feedback").addClass("expanded"),$("feedbackmessage").focus())})}var b=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;if(IS_MOBILE&&testRTCSupport()&&$("chatbtnwrapper")&&$("chatbtn")&&!b){$("chatbtn").setStyles({display:"inline","vertical-align":"middle"});var c=new Element("img",{alt:"Video",src:"/static/videobtn-enabled"+(window.devicePixelRatio&&devicePixelRatio>1?"@2x":"")+".png",events:{click:function(a){startFirstChat(!0)}},styles:{"margin-left":"0.5em","vertical-align":"middle"},width:124,height:50});$("chatbtnwrapper").grab(c),$("chatbtnwrapper").grab(new Element("p",{text:"Mobile video chat is an experimental new feature. Video is monitored, so keep it clean!",styles:{textAlign:"center"}}),"before"),((new Date).getYear()>119||(new Date).getMonth()>9)&&$("chatbtnwrapper").grab(new Element("p",{text:"Go to "}).grab(new Element("a",{text:"an adult site",target:"_blank",href:"https://wawadmin.omegle.com/redir/y?track=mobile-homepage",events:{click:function(){return confirm("You are about to go to a site with sexual material.\n\nIF YOU ARE UNDER 18, sexual material is illegal for you to view or possess, or you do not want to see that kind of material, PRESS CANCEL. By pressing OK, you affirm that you are at least 18 years old.")}}})).appendText(" instead if that's what you want."),"before")}}}function onReady(){function a(){$("tryspymodetext").empty();var a=makeSpyOptionsForm(startFirstChat);a.form.setStyle("marginTop","0.5em"),a.form.setStyle("marginBottom","0.5em"),$("tryspymodetext").appendText("Spy mode lets you ask a question and watch two strangers discuss it. (The strangers volunteer to be watched.)"),$("tryspymodetext").grab(new Element("br")),$("tryspymodetext").appendText("Ask anything you like, but try to keep questions open-ended and thought-provoking."),$("tryspymodetext").grab(a.form);var b=new Element("div"),c=new Element("button",{text:"Ask strangers"});c.addEvent("click",a.go),b.grab(c),$("tryspymodetext").grab(b);var d=new Element("div");d.setStyle("font-size","0.9em"),d.set("text","Or you can try ");var e=new Element("a");e.set("text","discussing questions"),e.set("href","javascript:"),e.addEvent("click",function(a){a.preventDefault(),startFirstChat(!1,null,!0,!1)}),d.grab(e),d.appendText(" instead."),$("tryspymodetext").grab(d),a.focus()}function b(){$("tryspymodetext").empty(),$("tryspymodetext").set("html","Spy mode gives you and a stranger a <strong>random question</strong> to discuss. The question is submitted by a third stranger who can watch the conversation, but can't join in.");var b=new Element("button",{text:"Check it out!"});b.addEvent("click",function(a){a.preventDefault(),startFirstChat(!1,null,!0,!1)}),$("tryspymodetext").grab(new Element("br")),$("tryspymodetext").grab(b);var c=new Element("div");c.setStyle("font-size","0.9em"),c.set("text","Or you can try ");var d=new Element("a");d.set("text","asking a question"),d.set("href","javascript:"),d.addEvent("click",function(b){b.preventDefault(),a()}),c.grab(d),c.appendText(" instead."),$("tryspymodetext").grab(c)}function c(){$("textbtnstatus")&&$("textbtnstatus").empty(),$("tryspymode").setStyle("display","block"),$("tryspymode").removeEvents("click"),$("tryspymode").removeClass("collapsed"),"spy"==idealSpyMode?a():b()}if(basicReady(),updateServerStatus(),null===$("textbtn")&&null===$("chatbtn"))return void window.addEvent("load",onReady);if("undefined"!=typeof FastClick&&new FastClick(document.body),($("textbtn")||$("chatbtn")).addEvent("click",function(){startFirstChat(!1)}),$("mobileadwrapper")&&(mobileAdWrapper=$("mobileadwrapper"),mobileAdWrapperSize=mobileAdWrapper.getSize(),"body"!==mobileAdWrapper.getParent().get("tag")&&($(document.body).grab(mobileAdWrapper),mobileAdWrapper.setStyle("display","none")),$("mobileadwrapper2"))){$("mobileadwrapper2").setStyles({width:mobileAdWrapperSize.x+"px",height:mobileAdWrapperSize.y+"px",margin:"auto","text-align":"center"});var d=$("mobileadwrapper2").getPosition();mobileAdWrapper.setStyles({display:"block",position:"absolute",top:d.y+"px",left:d.x+"px"})}$("tryspymode")&&($("tryspymode").addClass("needsclick"),$("tryspymode").addEvent("click",c),IS_MOBILE||($("tryspymode").setStyle("display","none"),new Element("a",{id:"spymodebtn",text:"Spy (question) mode",href:"javascript:",styles:{"border-radius":"0.5em","-moz-border-radius":"0.5em","-webkit-border-radius":"0.5em",background:"#EEE","font-weight":"normal",padding:"0.333em 0",display:"block","margin-left":"3px","margin-right":"3px","margin-top":"0.25em",color:"#333","text-decoration":"none"},events:{click:c}}).inject("textbtnstatus")));var e=makeTopicSettings(!0);if($("topicsettingscontainer")&&$("topicsettingscontainer").grab(e),collegeJustEnabled&&!function(){var a=new Element("div",{styles:{width:"90%","border-radius":"0.5em","text-align":"center",padding:"0.5em","margin-top":"1em","margin-left":"auto","margin-right":"auto"}});collegeAndAuth?(a.setStyle("background","#FF9"),a.set("html","Congrats! You enabled Omegle's new dorm mode. Start a new text or video chat, and you will be matched with other college students.<br><br>If you ever want to disable this, just uncheck the associated checkbox (above).")):(a.setStyle("background","red"),a.set("text","Sorry! It looks like you tried to enable dorm mode, but there was a technical error. Please make sure you have cookies enabled and try again.")),$("intro")&&$("intro").grab(a),$("chattypes").scrollIntoView(!1)}(),!IS_MOBILE){$("videobtn").removeEvents("click");var f=new Elements([new Element("a",{id:"videobtnunmoderated",text:"Unmoderated section",href:"javascript:",styles:{"border-radius":"0.5em","-moz-border-radius":"0.5em","-webkit-border-radius":"0.5em",background:"#EEE","font-weight":"normal",padding:"0.333em 0",display:"block","margin-left":"3px","margin-right":"3px","margin-top":"0.25em",color:"#333","text-decoration":"none"}}).inject("videobtnstatus")]);$("unmonitoredvideobtn")&&f.push(new Element("a",{id:"unmonitoredvideobtn",text:$("unmonitoredvideobtn").get("text"),href:"javascript:"}).replaces("unmonitoredvideobtn")),f.addEvent("click",function(a){a.preventDefault(),startUnmonitoredVideo()}),shouldForceUnmonitored&&$("videobtnstatus").set("html","&nbsp;"),testRTCSupport()?($("videobtn").addEvent("click",function(){startFirstChat(!0)}),window.history&&history.replaceState&&history.state&&history.state.videoStart&&(startFirstChat(!0,void 0,void 0,void 0,history.state.unmonitored),history.replaceState(null,document.title))):($("videobtn").set("src",$("videobtn").get("src").replace("-enabled","-disabled")),$("videobtnstatus").empty(),$("videobtnstatus").appendText("Please upgrade to the latest Firefox or Chrome."))}}function googleTranslateElementFullyLoaded(){if("undefined"!=typeof googTr&&googTr.c&&googTr.g&&"string"==typeof googTr.c&&"string"==typeof googTr.g&&("en"!==googTr.c.substr(0,2).toLowerCase()||"en"!==googTr.g.substr(0,2).toLowerCase())&&$("google_translate_wrapper")&&$("google_translate_lower_container")&&$("google_translate_lower_container").grab){$("google_translate_lower_container").grab($("google_translate_wrapper")),$("google_translate_lower_container").grab(new Element("br"));var a="English";googTr.L&&"string"==typeof googTr.L.en&&(a=googTr.L.en),$("google_translate_lower_container").appendText('(Select "'+a+'" to chat in English)')}}function onLoad(){IS_MOBILE&&setTimeout(function(){window.scrollTo(0,1)},0),IS_MOBILE||startSpinner()}function makeTopicSettings(a){function b(a){var b=new Element("span",{"class":"topictag"}),c=new Element("span",{"class":"topictagtext",text:a});b.grab(c);var d=new Element("span",{"class":"topictagdelete",html:"&times;"});d.addEvent("click",function(){b.destroy(),topicManager.remove(a),e()}),b.grab(d),j.grab(b);var f=new Element("span");f.setStyle("font-size",0),f.appendText(" "),j.grab(f)}function c(){e(),setTimeout(e,0)}function d(){var a=l.get("value");l.set("value",""),a=a.split(","),a=a.map(function(a){return a.trim()});for(var c=0;c<a.length;c++){var d=a[c];topicManager.add(d)&&(b(d),setShouldUseLikes(!0),z.set("checked",!0))}IS_MOBILE&&l.blur(),e()}function e(){l.value||topicManager.list().length?k.setStyle("display","none"):a&&!IS_MOBILE?k.setStyle("display","block"):k.setStyle("display","inline"),w.checked||topicManager.list().length?x.setStyle("display","block"):x.setStyle("display","none")}function f(a){Cookie.write("fblikes",a?"1":"0",{duration:365,domain:document.domain,path:"/"})}function g(){u.setStyle("display","block"),shouldUseFbLikes&&(w.set("checked",!0),e()),"0"!==Cookie.read("fblikes")&&FB.getLoginStatus(function(a){a.authResponse?(w.set("checked",!0),f(!0),shouldUseFbLikes=!0):f(!1),e()})}var h=new Element("div",{"class":"topictageditor"});if(a&&!IS_MOBILE){h.setStyles({padding:"4px","min-height":"40px","border-radius":"4px",position:"relative"});try{h.setStyle("background","-moz-linear-gradient(0deg, #F7F7F7, #FFF)"),h.setStyle("background","-webkit-linear-gradient(0deg, #F7F7F7, #FFF)"),h.setStyle("background","linear-gradient(0deg, #F7F7F7, #FFF)")}catch(i){}h.setStyle("border-radius","3px / 5px")}var j=new Element("span",{"class":"topictagwrapper"});h.grab(j),$each(topicManager.list(),b);var k=new Element("span",{"class":"topicplaceholder"});IS_MOBILE?k.appendText("Add your interests (optional)"):(k.appendText("What do you wanna talk about? (Type your interests here.)"),a&&(k.empty(),k.appendText("Add your interests (optional)"),k.setStyles({"line-height":"48px","text-align":"center","vertical-align":"middle","font-family":"'Lucida Grande', Lucida, sans-serif","font-size":"21px",position:"absolute",top:0,left:0,right:0,bottom:0}))),h.grab(k);var l=new Element("input",{type:"text","class":"newtopicinput"});l.addEvent("keydown",c),l.addEvent("keypress",c),l.addEvent("keyup",c),l.addEvent("keydown",function(a){32!==a.code||l.get("value")||a.preventDefault(),(13===a.code||188===a.code)&&(a.preventDefault(),d())}),l.addEvent("blur",d),h.grab(l),h.addClass("needsclick"),h.addEvent("click",function(){l.focus()});var m=new Element("div",{styles:{"text-align":"left"}});m.grab(h);var n=new Element("div"),o=new Element("a",{"class":"needsclick",text:"Add my Tumblr tags as topics",href:"javascript:",events:{click:function(a){a.preventDefault(),o.dispose(),n.grab(p),r.focus()}},styles:{"margin-left":"1.5em"}});n.grab(o);var p=new Element("form",{styles:{margin:0,padding:0},events:{submit:function(a){if(a.preventDefault(),!r.get("disabled")){var c=r.get("value");c&&(r.set("value",""),r.set("disabled",!0),s.set("disabled",!0),loadTumblrTags(c,function(a){if(r.set("disabled",!1),s.set("disabled",!1),a.success){for(var c=processTumblrTags(a.tags),d=0;d<c.length;d++){var f=c[d];topicManager.add(f)&&(b(f),setShouldUseLikes(!0),z.set("checked",!0))}e(),t.empty(),p.dispose(),n.grab(o),"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","Tumblr tags","Tags added"])}else t.empty(),t.setStyle("color","red"),t.appendText(a.error)}))}}}}),q=new Element("label");q.appendText("Tumblr name: ");var r=new Element("input",{type:"text"});q.grab(r),p.grab(q),p.appendText(" ");var s=new Element("input",{type:"submit",value:"Go"});p.grab(s);var t=new Element("div");t.setStyle("font-size","0.9em"),t.setStyle("max-width","20em"),t.appendText("Omegle will try to learn your interests from posts and likes you've made public on Tumblr. Omegle is NOT requesting special access to your Tumblr account, and will NOT save your username, or give it to anyone."),p.grab(t);var u=new Element("div");u.setStyle("display","none");var v=new Element("label"),w=new Element("input",{type:"checkbox"});w.addEvent("click",function(a){w.checked?(a.preventDefault(),FB.login(function(a){a.authResponse&&(shouldUseFbLikes=!0,f(!0),w.set("checked",!0),setShouldUseLikes(!0),z.set("checked",!0),e())},{scope:"user_likes"})):(shouldUseFbLikes=!1,f(!1)),setTimeout(e,0)}),v.grab(w),v.appendText(" Add my Facebook likes as topics"),u.grab(v);var x=new Element("div"),y=makeShouldUseLikesCheckbox(),z=y.getElement("input");if(x.grab(y),m.grab(x),e(),initOfFbComplete?g():initOfFbCallbacks.push(g),collegeAndAuth){var A=makeCollegeCheckboxes(new Element("a",{href:"javascript:",text:"(Delete)",styles:{"font-weight":"normal"},events:{click:function(b){b.preventDefault(),confirm('Are you sure you want to remove your college affiliation?\n\nIf you just want to quit dorm chat and chat with completely random strangers, you can uncheck the "find strangers from my college" box.')&&(clearCollegeSetting(),makeCollegeEmailForm(a).replaces(A))}}}));m.grab(A)}else m.grab(makeCollegeEmailForm(a));return m}function killHeaders(a){return delete a.headers["X-Requested-With"],delete a.headers["X-Request"],a}function makeSpyOptionsForm(a,b,c){function d(){a(!1,h.value,!1,k.checked)}void 0===b&&(b=""),void 0===c&&(c=!0);var e=new Element("form");e.addEvent("submit",function(a){a.preventDefault(),d()});var f=new Element("div"),g=new Element("label");g.grab(new Element("strong",{text:"Enter a question:"})),g.grab(new Element("br"));var h=new Element("input",{"class":"questionInput",value:b,maxlength:200});g.grab(h),f.grab(g),e.grab(f);var i=new Element("div");i.setStyle("marginTop","0.5em");var j=new Element("label"),k=new Element("input",{type:"checkbox",checked:c});return j.grab(k),j.appendText(" I want Omegle to reuse this question if it's good enough."),i.grab(j),e.grab(i),{form:e,focus:function(){h.focus()},go:d}}function isFlashing(){return null!==flashingInterval}function startFlashing(){function a(){var a=b.pop();document.title=a[0],setFavicon(a[1]),b.unshift(a)}if(!IS_MOBILE&&!isFlashing()){var b=[["___Omegle___","/static/favicon.png"],["¯¯¯Omegle¯¯¯","/static/altfavicon.png"]];flashingInterval=setInterval(a,500),a(),$(document).addEvent("mousemove",mouseMove),$(document).addEvent("keydown",stopFlashing),$(document).addEvent("focus",stopFlashing),$(window).addEvent("mousemove",mouseMove),$(window).addEvent("keydown",stopFlashing),$(window).addEvent("focus",stopFlashing)}}function mouseMove(a){var b=a.page;null===lastCoords||b.x==lastCoords.x&&b.y==lastCoords.y||stopFlashing(),lastCoords=b}function stopFlashing(){isFlashing()&&(clearInterval(flashingInterval),flashingInterval=null,document.title="Omegle",setFavicon("/static/favicon.png"),$(document).removeEvent("mousemove",mouseMove),$(document).removeEvent("keydown",stopFlashing),$(document).removeEvent("focus",stopFlashing),$(window).removeEvent("mousemove",mouseMove),$(window).removeEvent("keydown",stopFlashing),$(window).removeEvent("focus",stopFlashing))}function setFavicon(a){for(var b=$$("link"),c=0;c<b.length;c++)if("icon"===b[c].rel)return void(b[c].href=a);var d=new Element("link",{rel:"icon",type:"image/png",href:a});$$("head")[0].grab(d)}function initSpinner(a){function b(a,b,i){k.clearRect(0,0,g,h),d.width=d.width,k.drawImage(c,f,0,e-f,f,2*f,f,e-f,f);var j=a/b;if(.75>j)var l=17/8*Math.PI*Math.sin(j/.75*(Math.PI/2));else var l=Math.PI/8-Math.PI/8*(j-.75)/.25;i&&(l=-l),k.save(),k.translate(1.6*f,1.6*f),k.rotate(l),k.drawImage(c,0,0,f,f,.6*-f,.6*-f,f,f),k.restore()}if(window.CanvasRenderingContext2D){var c=$$("#logo > img")[0];if(c&&c.height){$("header").setStyles({height:"57px"});var d=new Element("canvas");d.setStyle("position","absolute");var e=c.naturalWidth||c.width,f=c.naturalHeight||c.height,g=e+f,h=3*f,i=c.width+c.height,j=3*c.height;d.width=g,d.height=h,d.style.width=i+"px",d.style.height=j+"px",d.style.marginLeft="-"+c.height+"px",d.style.marginTop="-"+c.height+"px";var k=d.getContext("2d");if(spinnerPossible=!0,a)return!0;var l=!1;return startSpinner=function(){if(!l){l=!0;var a=500+400*Math.random(),c=null;window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();var d=Math.random()<.5;requestAnimFrame(function e(f){f||(f=+new Date),c||(c=f);var g=f-c;g>a?(l=!1,b(0,1)):(b(g,a,d),requestAnimFrame(e))})}},initSpinner=function(){},b(0,1),c.setStyle("visibility","hidden"),c.grab(d,"before"),!0}}}function startSpinner(){initSpinner()&&startSpinner()}function startNewChat(a,b,c,d,e,f){function g(){var a=document.activeElement;if(!a)return Ea.get("disabled");var b=a.nodeName.toLowerCase();return"input"!==b&&"textarea"!==b}function h(a){27===a.code&&a.preventDefault();var b=new Date;(16===a.code||17===a.code||18===a.code||91===a.code||93===a.code)&&null!==Ja&&200>b-Ja&&b-ja>=350?(N(),H()):IS_MOBILE||Ea.get("disabled")||a.control||a.meta||!(8===a.code||37==a.code||39==a.code||a.code>=46&&a.code<=90||a.code>=96&&a.code<=111)?8===a.code&&g()&&a.preventDefault():Ea.focus()}function i(a){if(27===a.code){if(a.preventDefault(),Aa.get("disabled"))return;jb&&new Date-ja>=500&&(a.shift||a.alt||a.meta)?(N(),H()):(P(),Ja=new Date)}8===a.code&&g()&&a.preventDefault()}function j(){var a=new Date;if(50>a-La)return void(Ma||(Ma=setTimeout(j,50-(a-La))));Ma=null,La=a;var b=$$(".msggroup");if(!(b.length<2)){for(var c=$(document.body).getScroll(),d=$(document.body).getSize(),e=c.y+d.y/2,f=null,g=null,h=0;h<b.length;h++){var i=b[h],k=i.getCoordinates();if(!(k.bottom<c.y+bwLogo.height+5||k.width+bwLogo.width+10>d.x)){var l=Math.abs(k.bottom-e);(null===f||f>l)&&(f=l,g=i)}}g?Ka&&Ka.getParent()===g||(Ka&&Ka.dispose(),Ka=new Element("div",{styles:{position:"absolute",bottom:0}}),"right"==g.getComputedStyle("float")?Ka.setStyle("left","-"+(bwLogo.width+10)+"px"):Ka.setStyle("right","-"+(bwLogo.width+10)+"px"),Ka.grab(bwLogo),g.grab(Ka)):Ka&&(Ka.dispose(),Ka=null)}}function k(){return IS_MOBILE?ua.getCoordinates().bottom-window.innerHeight:scrollElt.scrollHeight-scrollElt.clientHeight}function l(){return scrollElt.getScrollTop()>=k()-6}function m(a){var b=IS_MOBILE&&document.activeElement&&$(Ea)==$(document.activeElement);if(l()||(scrollElt.scrollTo?scrollElt.scrollTo(scrollElt.scrollLeft,k()):scrollElt.scrollTop=k()),b&&$(Ea)!=$(document.activeElement)&&Ea.focus(),IS_MOBILE&&j(),a||void 0===a)for(var c=50;500>=c;c+=150)setTimeout(function(){m(!1)},c)}function n(a,b){var c=new Element("form");c.setStyle("display","none"),c.set("method","post"),c.set("target","_blank"),c.set("action","http://logs.omegle.com/generate"),c.set(b),a=a||{host:1};var d={log:JSON.encode(Oa),randid:randID};mb&&(d.topics=JSON.encode(mb)),nb&&(d.identdigests=nb),d=$extend(d,a),$each(d,function(a,b){var d=new Element("input",{type:"hidden",name:b,value:a});c.grab(d)}),$(document.body).grab(c),c.submit(),setTimeout(function(){c.dispose()},0)}function o(){var a=550,b=420,c=screen.height,d=screen.width,e=Math.round(d/2-a/2),f=0;c>b&&(f=Math.round(c/2-b/2));var g="scrollbars=yes,resizable=yes,toolbar=no,location=yes,width="+a+",height="+b+",left="+e+",top="+f;window.open("","intent",g),n({tweet:1},{target:"intent"})}function p(a){if(a){for(var b=0,c=0,d=0;d<a.length;d++)a[d].percentage?c+=a[d].percentage:b++;if(b)for(var d=0;d<a.length;d++)a[d].percentage||(a[d].percentage=(100-c)/(b+1))}}function q(a,b){if(!a)return b;for(var c=100*Math.random(),d=0;d<a.length;d++){var e=a[d];if(c<e.percentage)return $merge(b,e);c-=e.percentage}return b}function r(a){if(p(a.tests),p(a.variants),a.tests)for(var b=0;b<a.tests.length;b++)p(a.tests[b].variants)}function s(a){IS_MOBILE&&a.noMobile||(null===currentAffiliate||currentAffiliate.priority<a.priority)&&(currentAffiliate=q(a.tests,a))}function t(a){var b=l(),c=a();return b&&m(),c}function u(a,b){return t(function(){var c=new Element("div",{"class":"logitem"});return c.grab(a),0===Za.length||b?sa.grab(c):c.inject(Za[0].element,"before"),c})}function v(a,b){var c,d;void 0===b||b&&"string"!=typeof b?(c=!0,d=null):"string"==typeof b?(c=!0,d=b):c=!1,"string"==typeof a&&null===d&&(d=a),c&&!Pa&&null!==d&&Oa.push([d])}function w(a,b,c,d){if((void 0===b||b)&&startFlashing(),"string"==typeof a){var e=new Element("p",{"class":"statuslog"});e.appendText(a)}else{var e=new Element("div",{"class":"statuslog"});e.grab(a)}return v(a,d),u(e,c)}function x(a){"undefined"!=typeof Recaptcha&&Recaptcha.destroy(),null!==$a&&$a.dispose(),$a=u(a),initialLogIsRecaptcha=!1,Wa=!1}function y(a,b){return"undefined"!=typeof Recaptcha&&Recaptcha.destroy(),Wa&&"string"==typeof a?($($a.firstChild).empty(),$($a.firstChild).appendText(a),void v(a,b)):(null!==$a&&$a.dispose(),$a=w(a,!1,!1,"undefined"==typeof b?!1:b),initialLogIsRecaptcha=!1,void(Wa="string"==typeof a))}function z(a){var b=new Element("p",{"class":"strangermsg"}),c=new Element("strong",{"class":"msgsource"});c.appendText("Stranger: "),b.grab(c),b.appendText(" ");var d=new Element("span",{html:a});b.grab(d),u(b),Pa||Oa.push(["Stranger:",d.get("text")])}function A(a,b,c){var d=new Element("span");kb&&d.addClass("notranslate");var e=!0;if($each(c.split("\n"),function(a){e||d.grab(new Element("br")),e=!1,d.appendText(a)}),IS_MOBILE){var f=new Element("div",{"class":"msggroup-msg"});if(f.grab(d),Ya===a)t(function(){Xa.grab(f)});else{var g=new Element("div",{"class":"msggroup "+b+"group"}),h=(new Element("div",{"class":"msggroup-label",text:a+":"}),new Element("div",{"class":"msggroup-msgs"}));h.grab(f),g.grab(h),u(g),Xa=h,Ya=a}}else{var i=new Element("p",{"class":b}),j=new Element("strong",{"class":"msgsource"});j.appendText(a+":"),i.grab(j),i.appendText(" "),i.grab(d),u(i)}Pa||Oa.push([a+":",c])}function B(a,b){if("you"==a){var c="youmsg",d="You";la=!0}else{var c="strangermsg",d="Stranger";startFlashing(),
ma=!0}b=b.trim(),("stranger"!==a||-1===b.toLowerCase().indexOf("videobam"))&&(A(d,c,b),"stranger"!==a||-1===b.indexOf("FBI")&&-1===b.toLowerCase().indexOf("federal bureau")||w("If the above message says you have been reported to the FBI, it is not legitimate. Please ignore it."),"stranger"===a&&-1!==b.toLowerCase().indexOf("facebook.com/profile.php?")&&-1===b.toLowerCase().indexOf("id=")&&w("THE STRANGER DOES NOT KNOW YOUR FACEBOOK INFO. The above link directs anyone to their own profile; it is not really a link to your profile specifically."))}function C(a){for(var b=0;b<Za.length;b++)if(!a||Za[b].name===a){Za[b].element.dispose(),Za.splice(b,1);break}}function D(){C("Stranger")}function E(a){C(a);var b=w(a+" is typing...",!1,!0,!1);Za.push({name:a,element:b})}function F(){E("Stranger")}function G(){ab=!0,($("logo")||logoElt)&&($("logo")||logoElt).removeEvent("click",I),null!==bb&&(clearInterval(bb),bb=null),Ia&&($(window).removeEvent("resize",Ia),$(window).removeEvent("orientationchange",Ia)),IS_MOBILE?($(document.body).removeEvent("scroll",j),$(document).removeEvent("scroll",j)):($(document).removeEvent("keydown",h),$(document).removeEvent("keyup",i)),na.dispose()}function H(f,g,h,i,j){if(!ab){if(void 0===f){if(null!==cb)return void cb.go();f=a}f&&(g=null,h=!1,i=!1),void 0===g&&(g=b),void 0===h&&(h=c),void 0===i&&(i=d),void 0===j&&(j=e),a&&!f&&ha(),G(),startNewChat(f,g,h,i,j)}}function I(){if(!Na.stopped&&!eb){if(!confirm("Are you sure you want to end your chat?"))return;N()}a&&ha(),$(document.body).removeClass("inconversation"),$(document.body).removeClass("videochat"),$("logo").setStyle("cursor","default"),G(),showIntro()}function J(){if(!IS_MOBILE){if(null===unmonSexyButton){unmonSexyButton=new Element("img",{width:124,height:50,alt:"Sexy",styles:{cursor:"pointer","vertical-align":"middle","margin-right":"0.5em"}});var b="/static/sexbtn";unmonSexyTrack="",window.devicePixelRatio&&window.devicePixelRatio>1?unmonSexyButton.set("src",b+"@2x.png?xx"):unmonSexyButton.set("src",b+".png?xx")}if(unmonSexyButton.addEvent("click",function(){null!==db&&db();var b="unmon-upper-"+(shouldForceUnmonitored?"":"not")+"forced-";b+=a?"video":"text",window.open("http://wawadmin.omegle.com/redir/"+(IS_MOBILE?"mob":"y")+"?track="+b+unmonSexyTrack)}),null===unmonGayButton){unmonGayButton=new Element("img",{width:124,height:50,alt:"Gay",styles:{cursor:"pointer","vertical-align":"middle"}});var c="/static/gaybtnorange";unmonGayTrack="",window.devicePixelRatio&&window.devicePixelRatio>1?unmonGayButton.set("src",c+"@2x.png"):unmonGayButton.set("src",c+".png")}unmonGayButton.addEvent("click",function(){null!==db&&db();var b="unmon-upper-"+(shouldForceUnmonitored?"":"not")+"forced-";b+=a?"video":"text",window.open("http://wawadmin.omegle.com/redir/gay?track="+b+unmonGayTrack)});var d=new Element("div");d.grab(unmonSexyButton),IS_MOBILE||d.grab(unmonGayButton);var f=new Element("span",{html:"&times;",styles:{"font-weight":"bold",color:"#555","font-size":"1.5em",cursor:"pointer"},events:{click:function(){g.dispose(),chatPervTrack=[],pb.dispose(),qb.dispose()}}});e||(d.appendText(" "),d.grab(f));var g=u(d,!1)}}function K(f){function g(b){switch(b){case"text":H(!1,null,!1,!1,!1);break;case"video":H(!0);break;case"moderated section":H(a,null,!1,!1,!1);break;case"unmoderated section":null!==db&&db(),unmonitoredConfirm()&&H(a,null,!1,!1,!0)}}function h(a){if("video"!==a||!IS_MOBILE&&testRTCSupport()){if(y)if(y=!1,"video"===a)var b="turn on "+a;else var b="switch to "+a;else var b=a;x.appendText(" or "),x.grab(new Element("a",{href:"javascript:",text:b,events:{click:function(b){b.preventDefault(),g(a)}}}))}}function i(){setShouldUseEnglish(F.checked?!0:!1)}function j(){IS_MOBILE&&navigator.language&&"EN"!==navigator.language.substr(0,2).toUpperCase()&&!I.get("checked")?A.setStyle("display","block"):A.setStyle("display","none")}function k(a){aurrp=a,Cookie.write("aurrp",a?"1":"0",{duration:365,domain:document.domain,path:"/"})}function l(){function a(){if(l.empty(),e)f||(f=!0,i.set("text","Not automatically rerolling."),j.dispose(),h.grab(m),Q("new"));else{var a="Automatically rerolling in a moment";g&&l.set("text"," (Paused while you move your mouse)"),i.set("text",a),Q("new",g?void 0:d)}}function b(){ab||(d--,1>d?(clearInterval(bb),bb=null,H()):a())}function c(){return e||ab?void $(document.body).removeEvent("mousemove",c):(bb&&(clearInterval(bb),bb=null),p&&(clearTimeout(p),p=null),g=!0,a(),void(p=setTimeout(function(){p=null,g=!1,a(),bb||e||ab||(bb=setInterval(b,1e3))},200)))}var d=1,e=!Z||db(),f=!1,g=!1,h=new Element("div",{styles:{"vertical-align":"middle"}}),i=new Element("span");h.grab(i),h.appendText(" ");var j=new Element("input");j.set("type","button"),j.set("value","Stop"),db=function(){e||(null!==bb&&(clearInterval(bb),bb=null),e=!0,$(document.body).removeEvent("mousemove",c),a())},j.addEvent("click",function(){db()}),h.grab(j);var l=new Element("span");h.grab(l);var m=new Element("label");m.setStyle("color","black"),m.setStyle("font-weight","normal");var n=new Element("input");n.set("type","checkbox"),n.set("checked",Z),n.addEvent("change",function(){k(n.checked)}),m.grab(n),m.appendText(" Auto-reroll next time"),a(),w(h,!1,!1);var o=h.getSize().y+"px";if(h.setStyle("height",o),h.setStyle("line-height",o),!e){bb=setInterval(b,500);var p=null;$(document.body).addEvent("mousemove",c)}}function p(){var a;a=e?Ra:currentAffiliate,a&&r(a)}function r(b){b=q(b.variants,b),a&&b.videoMode?b=$merge(b,b.videoMode):!a&&b.textMode&&(b=$merge(b,b.textMode));var c=a?"video":"text";b.trackCode&&(c=b.trackCode),b.baseTrackCode&&(c=b.baseTrackCode+"-"+c);var d,e=new Element("span"),f=b.url.replace(/\$/g,c),g=new Element("a",{href:f,target:"_blank",events:{click:function(a){null!==db&&db()}}});if(g.setStyles({"text-decoration":"none"}),b.image){var h=new Element("img",{src:b.image,alt:""});h.setStyles({border:"0 none","vertical-align":"middle"}),g.grab(h),g.appendText(" ")}if(b.text){var i=new Element("span");i.setStyles({color:"black","text-decoration":"none","font-weight":"normal",background:"#EEE",padding:"0.25em 0.5em","vertical-align":"middle","border-radius":"0.5em","-moz-border-radius":"0.5em","-webkit-border-radius":" 0.5em",border:"1px solid #CCC"}),i.style.lineHeight="1.5",b.style&&i.setStyles(b.style),i.set("text",b.text),g.grab(i)}e.grab(g);var j=new Element("span");j.set("html","&times;"),j.setStyles({cursor:"default",color:"black","font-weight":"bold"}),j.addEvent("click",function(){currentAffiliate=null,d.destroy()}),b.noCloseButton||(e.appendText(" "),e.grab(j));var k=new Element("div");return k.setStyle("cursor","pointer"),k.addEvent("click",function(a){var b=$(a.target);g.hasChild(b)||g===b||j===b||j.hasChild(b)||window.open(f,"_blank")}),k.grab(e),d=u(k),(b.bottomPositioning||void 0===b.bottomPositioning)&&(d.setStyle("height",k.getSize().y+"px"),k.setStyles({position:"absolute",bottom:"0.5em"})),!0}if(!eb){eb=!0,chatOddEven=!chatOddEven,R(),newChatButton.removeEvents(),null!==unmonSexyButton&&unmonSexyButton.removeEvents(),null!==unmonGayButton&&unmonGayButton.removeEvents(),C(),Pa=!0,initialLogIsRecaptcha&&("undefined"!=typeof Recaptcha&&Recaptcha.destroy(),$a.dispose(),$a=null,initialLogIsRecaptcha=!1),fb&&(fb.destroy(),fb=null);for(var s=0;s<_a.length;s++)_a[s].dispose();if(mots=[],a){try{Vb.close()}catch(t){}Vb=null,tb&&(tb.srcObject=null),aa()}Cb&&(clearTimeout(Cb),Cb=null),a||IS_MOBILE||setTimeout(m,300),$(document.body).removeClass("inconversation"),Ea.set("disabled",!0),Ea.addClass("disabled"),Ha.set("disabled",!0),Ea.blur(),Ha.blur(),Q("new"),window.onbeforeunload=null,$(window).removeEvent("unload",N),stopped=!0;var v=(sa.get("html"),null);document.createRange&&(window.getSelection||document.getSelection)&&(v=document.createRange(),v.selectNodeContents(sa)),ka&&(cb=makeSpyOptionsForm(H,b,d),u(cb.form),IS_MOBILE||cb.focus());var x=new Element("div",{"class":"newchatbtnwrapper"});newChatButton.addEvent("click",function(){H()}),x.grab(newChatButton);var y=!0;if(c||b?(h("text"),h("video")):a?(h("text"),e||h("unmoderated section")):h("video"),IS_MOBILE&&y||w(x,!1,!1),rb&&J(),!c&&!b){var z=new Element("div",{"class":"logtopicsettings"}),A=new Element("form",{styles:{margin:0,padding:0}}),B=new Element("label"),D=new Element("input",{type:"radio",name:"language",value:"mylang",checked:!shouldUseEnglish});D.addEvent("click",i),B.grab(D),B.appendText(" My language"),A.grab(B),A.appendText(" ");var E=new Element("label"),F=new Element("input",{type:"radio",name:"language",value:"english",checked:shouldUseEnglish});F.addEvent("click",i),E.grab(F),E.appendText(" English"),A.grab(E),A.setStyle("display","none"),z.grab(A);var G=makeShouldUseLikesCheckbox(),I=G.getElement(".shoulduselikescheckbox");I.addEvent("click",j),j(),z.grab(G);var K=new Element("a",{href:"javascript:",text:"(Settings)"});if(shouldUseFbLikes||topicManager.list().length||(I.set("checked",!1),I.set("disabled",!0),K.set("text","(Enable)")),K.addEvent("click",function(a){a.preventDefault(),null!==db&&db(),A.dispose(),z.empty();var b=makeTopicSettings();z.grab(A),z.grab(b),b.getElement("input").focus(),I=b.getElement(".shoulduselikescheckbox"),I.addEvent("click",j),L&&L.dispose()}),z.appendText(" "),z.grab(K),collegeAndAuth){var L=makeCollegeCheckboxes(!1);z.grab(L)}else var L=null;u(z)}var M=new Element("div",{"class":"logsavelinks"}),O=new Element("span",{"class":"conversationgreat"});IS_MOBILE?O.set("text","Great chat? Save the log!"):O.set("text","Great chat?"),O.addEvent("click",function(){n()}),M.grab(O);var P=[],S=new Element("a");if(S.set("text","Get a link"),S.set("href","javascript:"),S.addEvent("click",function(a){a.preventDefault(),n()}),P.push(S),null!==v&&!IS_MOBILE){var T=new Element("a",{href:"javascript:",text:"Select all"});T.addEvent("click",function(a){a.preventDefault();var b=window.getSelection?window.getSelection():document.getSelection();b.removeAllRanges(),b.addRange(v)}),P.push(T)}var U=[],V=new Element("a",{href:"javascript:",text:"Facebook"});V.addEvent("click",function(a){a.preventDefault(),n({facebook:1})}),U.push(V);var W=new Element("a",{href:"javascript:",text:"Tumblr"});W.addEvent("click",function(a){a.preventDefault(),n({tumblr:1})}),U.push(W);var X=new Element("a",{href:"javascript:",text:"Twitter"});X.addEvent("click",function(a){a.preventDefault(),o()}),U.push(X);var Y=new Element("a",{href:"javascript:",text:"reddit"});Y.addEvent("click",function(a){a.preventDefault(),n({reddit:1})}),U.push(Y),IS_MOBILE||(M.appendText(" Save the log: "),M.grab(middotify(P)),M.appendText(" • Or post log to: "),M.grab(middotify(U)));var Z=aurrp;if(ka||la&&ma?w(M,!1,!1):!a||f||IS_MOBILE||l(),c&&!la&&w("Please try to discuss the question, not just disconnect!"),p(),mobileAdWrapper){var _=new Element("div",{styles:{width:mobileAdWrapperSize.x+"px",height:mobileAdWrapperSize.y+"px"}});w(_),Ia=function(){mobileAdWrapper.setStyles({display:"block",position:"absolute"}),mobileAdWrapper.setPosition(_.getPosition())},Ia(),$(window).addEvent("resize",Ia)}}}function L(a){function b(){var b=new Element("div");x(b),IS_MOBILE||$a.setStyles({position:"absolute",bottom:"0"}),initialLogIsRecaptcha=!0,grecaptcha.render(b,{sitekey:a,callback:function(a){y("Verifying..."),Na.submitRecaptcha(a)},size:window.xrecaptchasize})}window.grecaptcha&&grecaptcha.render?b():window.recaptchaOnLoad=b}function M(a){L(a),"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","CAPTCHA","CAPTCHA shown"])}function N(){Na.stopped||eb||(Na.disconnect(),w("You have disconnected.",!1),K())}function O(){var a="Leaving this page will end your conversation.";return a}function P(){if(!Aa.get("disabled"))switch(ob){case"disconnect":Q("really"),Ea.get("disabled")||IS_MOBILE||Ea.focus();break;case"really":N();break;case"new":H()}}function Q(a,b){var c;switch(a){case"disconnect":c="Stop";break;case"really":c="Really?";break;case"new":c="New"}void 0!==b&&(c+="..."),Aa.set("text",c),Aa.grab(new Element("div",{"class":"btnkbshortcut",text:"Esc"})),ob=a,za.removeClass("reallybtn"),"new"===a?za.addClass("newbtn"):"really"===a&&za.addClass("reallybtn")}function R(){}function S(){if(rb)return!0;if(IS_MOBILE||!e)return!1;rb=!0,pb=new Element("td",{"class":"lowersexybtncell"});var b=new Element("div",{"class":"lowersexybtnwrapper"}),c="unmon-lower-"+(shouldForceUnmonitored?"":"not")+"forced-";c+=a?"video":"text";var d=new Element("button",{"class":"lowersexybtn",text:"Pervy Girls (Free, 18+)",events:{click:function(a){a.preventDefault(),db&&db(),window.open("http://wawadmin.omegle.com/redir/y?track="+c)}}});b.grab(d),pb.grab(b),ya.grab(pb,"after"),qb=new Element("td",{"class":"lowergaybtncell"});var f=new Element("div",{"class":"lowergaybtnwrapper"}),g=new Element("button",{"class":"lowergaybtn",text:" gay cams  (free"+(e?"":", 18+")+")",events:{click:function(a){a.preventDefault(),db&&db(),window.open("http://wawadmin.omegle.com/redir/gay?track="+c)}}});return f.grab(g),qb.grab(f),pb.grab(qb,"after"),"undefined"==typeof doUnmonSexyTest&&(doUnmonSexyTest=Math.random()<.5),c+="-none-"+(doUnmonSexyTest?"y":"n"),R=function(){var a=["💋 *soft moan*","adult cams (free)"];a[1]="girl cams   (free)  ";for(var b=null;"string"!=typeof a;)b=Math.floor(Math.random()*a.length),a=a[b];if(d.set("text",a),chatOddEven)var c=g,e=d;else var c=d,e=g;var f="0 0 40px 10px #F0F inset";f="",c.setStyles({"box-shadow":f,"-webkit-box-shadow":f,"-moz-box-shadow":f,background:"red",background:"#FF7F00"}),lastActiveUnmonSexy=c,e.setStyles({"box-shadow":"none","-webkit-box-shadow":"none","-moz-box-shadow":"none","font-weight":"normal",background:"white",color:"black"})},R(),!0}function T(){if(sb.getSize&&sb.getPosition&&$(window).getSize){var a=$(window).getSize(),b=screen.msOrientation||screen.mozOrientation||(screen.orientation||{}).type;if("landscape-primary"===b||"landscape-secondary"===b?isLandscape=!0:"portrait-primary"===b||"portrait-primary"===b?isLandscape=!1:isLandscape=screen.width>screen.height,isLandscape){var c=a.y,d=4/3,e=200,f=c*d;a.x-f<=e&&(f=a.x-e,c=f/d)}else{var f=a.x,d=4/3,g=200,c=f/d;a.y-c<=g&&(c=a.y-g,f=c*d)}sb.setStyles({width:Math.floor(f)+"px",height:Math.floor(c)+"px",top:0,left:0,position:"fixed","z-index":1e4}),tb.setStyles({width:Math.floor(f)+"px",height:Math.floor(c)+"px",borderTopLeftRadius:"0"}),ub.setStyles({width:Math.floor(f/5)+"px",height:Math.floor(c/5)+"px",top:0,bottom:"unset",right:0,left:"unset",borderBottomLeftRadius:"0"}),vb.setStyles({width:Math.floor(.25*c)+"px",height:Math.floor(.25*c)+"px",top:Math.floor(.5*c-.125*c)+"px",left:Math.floor(.5*f-.125*c)+"px",display:"none"}),wb.setStyles({position:"absolute",left:"8px",bottom:"8px"}),isLandscape?(qa.setStyles({marginLeft:f+"px",marginTop:0}),ua.setStyles({marginLeft:f+"px"})):(qa.setStyles({marginLeft:0,marginTop:c+8+"px"}),ua.setStyles({marginLeft:0}))}}function U(){if(IS_MOBILE)return T();if(sb.getSize&&sb.getPosition&&$(window).getSize){var a=$(window).getSize(),b=qa.getSize().y,b=a.y-qa.getPosition().y-8,c=320;if(c>b&&(b=c),e)var d=58;else var d=0;var f=4/3,g=(b-8-d)/2,h=f*g;a.x-h<=400&&(h=a.x-400,g=h/f,b=2*g+8+d),sb.setStyles({width:Math.floor(h)+"px",height:Math.floor(b)+"px"}),new Elements([ub,tb]).setStyles({width:Math.floor(h)+"px",height:Math.floor(g)+"px"}),new Elements([ua,qa]).setStyle("margin-left",h+8+"px"),vb.setStyles({width:Math.floor(.25*g)+"px",height:Math.floor(.25*g)+"px",top:Math.floor(d+.5*g-.125*g)+"px",left:Math.floor(.5*h-.125*g)+"px"}),wb.setStyles({position:"absolute",left:"8px",bottom:g+16+"px"}),tb.setStyle("top",d+"px")}}function V(){W(),IS_MOBILE||Ea.focus();var a=Ea.value;if(a){if(Ea.value="",IS_MOBILE){var b=Ea.clone().cloneEvents(Ea);b.replaces(Ea),Ea=b}else Ea.focus();xb="",B("you",a),Na.sendMessage(a),Q("disconnect")}}function W(){null!==yb&&(clearTimeout(yb),yb=null)}function X(){yb=null,Na.stopTyping()}function Y(){Z("accept"),window.open("http://wawadmin.omegle.com/redir/y?track=interchat-"+Jb)}function Z(a){(new Image).src="http://wawadmin.omegle.com/redir/interchatexit?track="+a+"-"+Jb}function _(){(new Image).src="http://wawadmin.omegle.com/redir/interchatenter?track="+Jb}function aa(){vb.setStyle("display","none"),tb.removeEventListener("play",aa)}function ba(){y("Connection error."),K()}function ca(a){for(var b=a.split("\r\n"),c=0;c<b.length;c++)if(-1!==b[c].search("m=audio")){var d=c;break}if(null===d)return a;for(var c=0;c<b.length;c++)if(-1!==b[c].search("opus/48000")){var e=da(b[c],/:(\d+) opus\/48000/i);e&&(b[d]=ea(b[d],e));break}return b=fa(b,d),a=b.join("\r\n")}function da(a,b){var c=a.match(b);return c&&2==c.length?c[1]:null}function ea(a,b){for(var c=a.split(" "),d=new Array,e=0,f=0;f<c.length;f++)3===e&&(d[e++]=b),c[f]!==b&&(d[e++]=c[f]);return d.join(" ")}function fa(a,b){for(var c=a[b].split(" "),d=a.length-1;d>=0;d--){var e=da(a[d],/a=rtpmap:(\d+) CN\/\d+/i);if(e){var f=c.indexOf(e);-1!==f&&c.splice(f,1),a.splice(d,1)}}return a[b]=c.join(" "),a}function ga(a){a.sdp=ca(a.sdp),Vb.setLocalDescription(a,function(){Na.sendRTCPeerDescription(a)},ba)}function ha(){if(ub&&(ub.srcObject=null),userMedia){for(var a=userMedia.getTracks(),b=0;b<a.length;b++){var c=a[b];c.stop&&c.stop()}userMedia=null}}function ia(){IS_MOBILE&&document.documentElement.requestFullscreen&&-1===navigator.userAgent.indexOf("Firefox")&&document.documentElement.requestFullscreen({navigationUI:"hide"}),ub.srcObject||(ub.srcObject=userMedia);var a=userMedia.getVideoTracks();a.length?cameraName=a[0].label:cameraName="",Vb.addStream?Vb.addStream(userMedia):userMedia.getTracks().forEach(function(a){Vb.addTrack(a,userMedia)}),y("Connecting to server..."),IS_MOBILE||vb.setStyle("display","block"),tb.addEventListener("play",aa,!1),Na.connect(null,null,!1,!1,zb,Bb,e?"unmon":null,Ub,cameraName,!0,Db,Eb,Fb),serverManager.unsetKnownGood(),!e&&antinudeServers.length&&(Cb=setTimeout(function(){function a(b){Cb=null,m.getContext("2d").drawImage(ub,i,j+d*b,c*g,d*h),b+1==e?m.toBlob(function(a){if(antinudeServers.length){var b=antinudeServers[$random(0,antinudeServers.length-1)],c=new XMLHttpRequest;a=a.slice(0,a.size,"application/octet-stream"),c.open("POST","https://"+b+"/upload?camera="+encodeURIComponent(cameraName)+"&num_frames="+e+"&frame_delay="+f+"&randid="+encodeURIComponent(randID)),c.withCredentials=!0,c.send(a)}},"image/jpeg",.6):Cb=setTimeout(function(){a(b+1)},f)}Cb=null;var b=new Date;if(!(lastScreenshotTime&&6e4>b-lastScreenshotTime||(lastScreenshotTime=b,Math.random()>screenshotPercent))){var c=320,d=240,e=4,f=300,g=1,h=1,i=0,j=0;if(ub.videoHeight&&ub.videoWidth&&ub.videoHeight*(c/ub.videoWidth)!=d){var k=c/d,l=ub.videoWidth/ub.videoHeight;k>l?(g=d/(ub.videoHeight*(c/ub.videoWidth)),i=Math.floor((c-g*c)/2)):(h=c/(ub.videoWidth*(d/ub.videoHeight)),j=Math.floor((d-h*d)/2))}var m=new Element("canvas",{width:c,height:d*e});a(0)}},$random(1500,5e3)))}$("appstore")&&$("appstore").destroy(),$("footer")&&$("footer").destroy(),f&&shouldForceUnmonitored&&(e=!0),mobileAdWrapper&&mobileAdWrapper.setStyle("display","none"),stopFlashing(),IS_MOBILE||startSpinner();var ja=new Date,ka="string"==typeof b,la=!1,ma=!1;a&&totalVideoChatsStarted++,$(document.body).addClass("inconversation"),a?$(document.body).addClass("videochat"):$(document.body).removeClass("videochat");var na=new Element("div",{"class":"chatbox3"}),oa=new Element("div",{"class":"chatbox2"}),pa=new Element("div",{"class":"chatbox"});IS_MOBILE&&!a&&na.grab(logoElt);var qa=new Element("div",{"class":"logwrapper",styles:{top:contentTop+"px"}}),ra=new Element("div",{"class":"logbox"}),sa=new Element("div");IS_MOBILE||sa.setStyles({position:"relative","min-height":"100%"}),ra.grab(sa),qa.grab(ra);var ta=new Element("div",{"class":"logwrapperpush"});qa.grab(ta),pa.grab(qa);var ua=new Element("div",{"class":"controlwrapper"}),va=new Element("table",{"class":"controltable",cellpadding:"0",cellspacing:"0",border:"0"}),wa=new Element("tbody"),xa=new Element("tr"),ya=new Element("td",{"class":"disconnectbtncell"}),za=new Element("div",{"class":"disconnectbtnwrapper"}),Aa=new Element("button",{"class":"disconnectbtn"});za.grab(Aa),ya.grab(za),xa.grab(ya);var Ba=new Element("td",{"class":"chatmsgcell"}),Ca=new Element("div",{"class":"chatmsgwrapper"});if(IS_MOBILE){var Da=new Element("form",{action:"#",method:"post"});Da.setStyles({margin:0,padding:0}),Da.addEvent("submit",function(a){a.preventDefault(),V()});var Ea=new Element("input",{"class":"chatmsg disabled",disabled:!0,placeholder:"Type your message..."});Ea.addEvent("focus",function(){m()}),Da.grab(Ea),Ca.grab(Da)}else{var Ea=new Element("textarea",{"class":"chatmsg disabled",cols:"80",rows:"3",disabled:!0});Ca.grab(Ea)}Ba.grab(Ca),xa.grab(Ba);var Fa=new Element("td",{"class":"sendbthcell"}),Ga=new Element("div",{"class":"sendbtnwrapper"}),Ha=new Element("button",{"class":"sendbtn",disabled:!0,text:"Send"});Ha.grab(new Element("div",{"class":"btnkbshortcut",text:"Enter"})),Ga.grab(Ha),Fa.grab(Ga),IS_MOBILE||xa.grab(Fa),wa.grab(xa),va.grab(wa),ua.grab(va),pa.grab(ua),oa.grab(pa),na.grab(oa),$(document.body).grab(na),$(document.body).scrollTop=$(document.body).scrollHeight;var Ia=null,Ja=null,Ka=null,La=null,Ma=null;IS_MOBILE?($(document.body).addEvent("scroll",j),$(document).addEvent("scroll",j)):($(document).addEvent("keydown",h),$(document).addEvent("keyup",i));var Na=new MetaBackend;IS_MOBILE?scrollElt=document.body:scrollElt=ra;for(var Oa=[],Pa=!1,Qa=[{topics:["reddit"],regex:/reddit/,url:"http://wawadmin.omegle.com/redir/reddit",text:"Psst... did you know Omegle has its own subreddit?",image:"/static/redditalien.png"}],Ra=null,Sa=0;Sa<Qa.length;Sa++){var Ta=Qa[Sa];Ta.priority||(Ta.priority=Sa),r(Ta)}if(Ra&&r(Ra),isFirstChat){for(var Sa=0;Sa<Qa.length;Sa++){var Ta=Qa[Sa];if(Ta.topics)for(var Ua=0;Ua<Ta.topics.length;Ua++){var Va=Ta.topics[Ua];if(topicManager.check(Va)){s(Ta);break}}}isFirstChat=!1}var Wa,Xa=null,Ya=null,Za=[],$a=null,_a=[],ab=!1;($("logo")||logoElt)&&(($("logo")||logoElt).addEvent("click",I),($("logo")||logoElt).setStyle("cursor","pointer"));var bb=null,cb=null,db=function(){return db=function(){return!0},!1},eb=!1;Na.addEvent("connectedToServer",function(){Aa.set("disabled",!1),window.onbeforeunload=O,$(window).addEvent("unload",N)}),Na.addEvent("failedToConnect",function(a){y("Error connecting to server. Please try again."),K(),"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","Omegle connect error",a])});var fb=null,gb=null,hb=!1,ib=null;Na.addEvent("waiting",function(){function a(){gb&&(clearTimeout(gb),gb=null),fb&&(Na.stopLookingForCommonLikes(),fb.destroy(),fb=null)}if(ib=+new Date,serverManager.setKnownGood(),ka)return void y("Looking for two strangers...");var b="Looking for someone you can chat with...";if(!Ab)return void y(b);var c=new Element("div"),d=new Element("div",{text:b});c.grab(d),fb=new Element("div",{"class":"commonlikescancel",text:"It may take a little while to find someone with common interests. If you get tired of waiting, you can "});var e=new Element("a",{href:"javascript:",text:"connect to a completely random stranger"});e.addEvent("click",a),fb.grab(e),fb.appendText(" instead."),c.grab(fb),gb=setTimeout(function(){hb=!0,a()},1e4),y(c)});var jb=!1;Na.addEvent("strangerConnected",function(){if(!eb)if(null!==ib&&+new Date-ib>1e3&&startFlashing(),"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","Omegle chat connected",Hb]),jb=!0,serverManager.setKnownGood(),gb&&(clearTimeout(gb),gb=null),ka)y("You're now watching two strangers discuss your question!","You're watching two strangers discuss your question on Omegle!");else{var b=new Date;if(11===b.getMonth()&&25===b.getDate())var c="merry Christmas";else if(9==b.getMonth()&&119==b.getYear()&&b.getDate()<=19)var d=["stand with Hong Kong","fuck the CCP","the Tiananmen Square Massacre was evil","Xi = Pooh","China's government oppresses its people","people in China, Hong Kong, Taiwan, Tibet, and everywhere deserve freedom","Mao's Great Leap Forward killed tens of millions, yet the CCP venerates Mao even today"],c=d[Math.floor(d.length*Math.random())];else var c="hi";y("You're "+(IS_MOBILE?"":"now ")+"chatting with a random stranger. Say "+c+"!","You're chatting with a random stranger on Omegle!"),hb&&w("Omegle couldn't find anyone who shares interests with you, so this stranger is completely random. Try adding more interests!",!1,!1,!1),Ea.set("disabled",!1),Ea.removeClass("disabled"),Ha.set("disabled",!1),IS_MOBILE||Ea.focus(),a&&window.navigator.userAgent.indexOf("Edge")>-1&&w("Omegle video chat might not work well in Microsoft Edge. Please upgrade to Firefox or Chrome.")}}),Na.addEvent("gotMessage",function(a){D(),a=a.replace(/^[\r\n]+/g,""),navigator.notification&&navigator.notification.beep&&navigator.notification.beep(1),navigator.vibrate&&navigator.vibrate(333),B("stranger",a)}),Na.addEvent("gotMessageHTML",function(a){D(),z(a)}),Na.addEvent("strangerDisconnected",function(){w("Stranger has disconnected."),K()}),Na.addEvent("typing",F),Na.addEvent("stoppedTyping",D),Na.addEvent("recaptchaRequired",M),Na.addEvent("recaptchaRejected",M),Na.addEvent("connectionDied",function(a){var b="Technical error";a&&(b+=": "+a+" Sorry. :( Omegle understands if you hate it now, but Omegle still loves you."),w(b),serverManager.unsetKnownGood(),"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","Omegle error",a?a:"(error)",Na.server]),K()}),Na.addEvent("question",function(a){var b=new Element("div",{"class":"question"}),c=new Element("div",{"class":"questionHeading",text:"Question to discuss:"});b.grab(c);var d=new Element("div",{"class":"questionText"});d.appendText(a),b.grab(d),Oa.push(["Question to discuss:",a]),u(b)}),Na.addEvent("spyMessage",function(a,b){if("Stranger 1"===a)var c="youmsg";else var c="strangermsg";C(a),startFlashing(),A(a,c,b)}),Na.addEvent("spyDisconnected",function(a){w(a+" has disconnected"),K()}),Na.addEvent("spyTyping",E),Na.addEvent("spyStoppedTyping",C),Na.addEvent("error",function(a){w(a),K()});var kb=!1;Na.addEvent("serverMessage",function(a){-1!==a.indexOf("language")&&(kb=!0,IS_MOBILE||"undefined"==typeof googTr||(a+=' (Select "English" from the menu in the corner to disable.)')),w(a,!1)}),Na.addEvent("antinudeBanned",function(a){w("Banned."),K(),null!==db&&db(),top.location.href=a});var lb=null,mb=null;Na.addEvent("commonLikes",function(a){if(a.length){mb=a;for(var b="You both like ",c=0;c<mb.length;c++)b+=mb[c],c<mb.length-1&&(b+=", "),c==mb.length-2&&(b+="and ");b+=".",lb&&lb.destroy(),lb=w(b)}}),Na.addEvent("partnerCollege",function(a){w("Stranger's college: "+a)});var nb=null;Na.addEvent("identDigests",function(a){nb=a});var ob="disconnect";Ha.addEvent("click",V),Q("disconnect"),Aa.addEvent("click",P);var pb,qb,rb=!1;if(S()||e||chatPervTrack.push(!1),"undefined"==typeof doAVCtest&&(doAVCtest=Math.random()<.5),a){$("videowrapper")||$(document.body).grab(new Element("div",{id:"videowrapper"})),$("othervideo")||($("videowrapper").grab(new Element("video",{id:"othervideo",events:{contextmenu:function(){return!1}}})),window.testOverrideConstraints&&($("othervideo").src="/static/spinner.mp4"),$("othervideo").autoplay=!0,$("othervideo").setAttribute("playsinline","playsinline"),$("othervideo").setAttribute("webkit-playsinline","playsinline")),$("selfvideo")||($("videowrapper").grab(new Element("video",{id:"selfvideo",events:{contextmenu:function(){return!1}},styles:{"z-index":100}})),$("selfvideo").muted=!0,$("selfvideo").autoplay=!0,$("selfvideo").setAttribute("playsinline","playsinline"),$("selfvideo").setAttribute("webkit-playsinline","playsinline")),$("othervideospinner")||$("videowrapper").grab(new Element("div",{id:"othervideospinner"})),$("videologo")||(logoShadowImg||(logoShadowImg=new Element("img",{src:"/static/dotcomlogoshadow"+(window.devicePixelRatio&&window.devicePixelRatio>1?"@2x":"")+".png",width:175,height:49})),$("videowrapper").grab(logoShadowImg.clone().set("id","videologo").addEvent("contextmenu",function(){return!1}).addEvent("mousedown",function(){return!1}).setStyle("opacity","0.66"))),e&&!$("abovevideosexybtn")&&$("videowrapper").grab(new Element("div",{styles:{background:"red",color:"white","font-size":"30px",height:"30px","line-height":"30px","vertical-align":"middle",cursor:"pointer","text-align":"center",padding:"10px 0","margin-bottom":"8px","border-radius":"20px",position:"absolute",top:0,left:0,width:"100%"},id:"abovevideosexybtn",events:{click:function(a){a.preventDefault(),db&&db(),window.open("http://wawadmin.omegle.com/redir/y?track=avc-108-"+(doAVCtest?"y":"n"))}},text:"What happens if click?"}),"top");var sb=$("videowrapper"),tb=$("othervideo"),ub=$("selfvideo"),vb=$("othervideospinner"),wb=$("videologo");$("abovevideosexybtn");U(),$(window).addEvent("resize",U),$(window).addEvent("orientationchange",U),Ia=U}else var sb=null,tb=null,ub=null;e&&a||$$("#abovevideosexybtn").dispose();var xb=Ea.value,yb=null;Ea.addEvent("keydown",function(a){return 13!=a.code||a.shift||a.alt||a.meta?void 0:(V(),void a.preventDefault())}),Ea.addEvent("keyup",function(a){setTimeout(function(){Ea.value!==xb&&(xb=Ea.value,null===yb&&Na.typing(),W(),yb=setTimeout(X,5e3))},0)}),y("Connecting to server...");var zb=null,Ab=!1,Bb=[],Cb=null,Db=null,Eb=null,Fb=!1;if(!c&&!b&&!e){if(shouldUseLikes){if(shouldUseFbLikes){var Gb=FB.getAuthResponse();zb=Gb?Gb.accessToken:null}Bb=topicManager.list(),Ab=Bb.length||null!==zb}"none"!==collegeMode&&collegeAndAuth&&(Fb="any"===collegeMode,Db=collegeAndAuth[0],Eb=collegeAndAuth[1])}var Hb=function(){var d=[];return IS_MOBILE&&d.push("mobile"),b?d.push("spy"):c?d.push("spyee"):a?d.push("video"):d.push("text"),e&&(d.push("unmonitored"),shouldForceUnmonitored&&d.push("(forced)")),Ab&&(d.push("topical"),zb&&d.push("(FB)")),"none"!==collegeMode&&Eb&&d.push("college"),d[0]=d[0][0].toUpperCase()+d[0].substr(1),d.join(" ")}();"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","Omegle chat started",Hb]);if(e){if("undefined"==typeof unmonChatCount&&(unmonChatCount=0,unmonAdCount=0),unmonAdCount<1&&unmonChatCount>=4){unmonAdCount++;var Ib=Math.random()<.5,Jb="gwfy9-"+(Ib?"y":"n"),Kb=new Element("div",{styles:{width:"40em",border:"1px solid #3F9FFF","border-top-left-radius":"0.5em","border-top-right-radius":"0.5em",overflow:"hidden"}}),Lb=new Element("div",{styles:{background:"#3F9FFF",color:"white","font-size":"1.5em",padding:"0.3333em","font-weight":"bold","text-align":"center","text-shadow":"0 0 15px #3F3F3F","-webkit-text-shadow":"0 0 15px #3F3F3F","-moz-text-shadow":"0 0 15px #3F3F3F",cursor:"pointer"},events:{click:Y},text:Ib?"A girl wants you":"Girls want you"});Kb.grab(Lb);var Mb=new Element("div",{styles:{padding:"0.5em",position:"relative",overflow:"hidden"}});Mb.setStyle("padding-bottom","3.5em");var Nb=new Element("div",{html:""});Mb.grab(Nb);var Ob=new Element("div",{styles:{position:"absolute",right:0,bottom:0,"border-top":"1px solid #3F9FFF","border-left":"1px solid #3F9FFF",padding:"0.5em","text-align":"center",cursor:"pointer",height:"1em",position:"absolute",background:"white",color:"black"},events:{click:function(){Z("refuse"),H()}}}),Pb=new Element("span",{text:"No",styles:{"vertical-align":"middle"}});Ob.grab(Pb);var Qb=new Element("div",{styles:{position:"absolute",bottom:0,left:0,background:"#3F9FFF",padding:"0.5em","text-align":"center",color:"white",cursor:"pointer",height:"1.5em","border-top":"1px solid #3F9FFF","border-right":"1px solid #3F9FFF",width:"15.25em","z-index":"1","border-top-right-radius":"0.5em"},events:{click:Y}}),Rb=new Element("span",{text:"Give me girls",styles:{"font-size":"1.5em","vertical-align":"middle","text-shadow":"0 0 15px #3F3F3F","-webkit-text-shadow":"0 0 15px #3F3F3F","-moz-text-shadow":"0 0 15px #3F3F3F"}});Qb.grab(Rb),Mb.grab(Ob),Mb.grab(Qb);var Sb=new Element("div",{styles:{position:"absolute",bottom:0,left:"15.75em",background:"#FF7F00",padding:"0.5em 0.5em 0.5em 1em","text-align":"center",color:"white",cursor:"pointer",height:"1.5em","border-top":"1px solid #FF7F00","border-right":"1px solid #FF7F00",width:"15.25em","border-top-right-radius":"0.5em","z-index":"0"},events:{click:function(){Z("gayaccept"),
window.open("http://wawadmin.omegle.com/redir/gay?track=interchat-"+Jb)}}}),Tb=new Element("span",{text:"Free gay cams",styles:{"font-size":"1.5em","vertical-align":"middle","text-shadow":"0 0 15px #7F7F7F","-webkit-text-shadow":"0 0 15px #7F7F7F","-moz-text-shadow":"0 0 15px #7F7F7F"}});return Sb.grab(Tb),Mb.grab(Sb),Kb.grab(Mb),x(Kb),Aa.set("disabled",!0),void _()}unmonChatCount++}var Ub=null;if(shouldUseEnglish&&!Ab||("undefined"!=typeof googTr&&googTr.c&&"string"==typeof googTr.c&&googTr.c.length>=2?Ub=googTr.c.substr(0,2):"undefined"!=typeof navigator&&"string"==typeof navigator.language&&(Ub=navigator.language.substr(0,2))),a){var Vb=new RTCPeerConnection(WEB_RTC_CONFIG,WEB_RTC_PEER_CONSTRAINTS);Vb.onaddstream=function(a){tb.srcObject=a.stream};var Wb=[],Xb=null;Vb.onicecandidate=function(a){null!==Xb&&(clearTimeout(Xb),Xb=null),a.candidate&&Wb.push(a.candidate),a.candidate&&"complete"!==Vb.iceGatheringState?Xb=setTimeout(function(){Wb.length&&(Na.sendICECandidates(Wb),Wb=[]),Xb=null},10):Wb.length&&(Na.sendICECandidates(Wb),Wb=[])};var Yb=!1,Zb=[],$b=!1;Na.addEvent("icecandidate",function(a){if(!$b)return void Zb.push(a);try{Vb.addIceCandidate(new RTCIceCandidate(a))}catch(b){console.log(b)}}),Na.addEvent("rtccall",function(){Yb=!0,Vb.createOffer(ga,ba,WEB_RTC_MEDIA_CONSTRAINTS)}),Na.addEvent("rtcpeerdescription",function(a){a=new RTCSessionDescription(a),Vb.setRemoteDescription(a,function(){$b=!0;for(var a=0;a<Zb.length;a++)try{Vb.addIceCandidate(new RTCIceCandidate(Zb[a]))}catch(b){console.log(b)}Zb=[],Yb||setTimeout(function(){Vb.createAnswer(function(a){ga(a)},ba,WEB_RTC_MEDIA_CONSTRAINTS)},0)},ba)}),null!==userMedia&&userMedia.active?ia():(userMedia=null,ub.srcObject=null,y("Please allow Omegle to use your camera..."),navigator.mediaDevices.getUserMedia(window.testOverrideConstraints||{video:{aspectRatio:4/3,facingMode:"user"},audio:{echoCancellation:!0}}).then(function(a){userMedia=a,ia()},function(a){y("NotAllowedError"===a.name?"Camera blocked. Please enable it and try again.":a.message?"Error with camera: "+a.message:"Error with camera: "+a),K(!0)}))}else Na.connect(null,b,c,d,zb,Bb,e?"unmon":null,Ub,null,!1,Db,Eb,Fb),serverManager.unsetKnownGood()}function testRTCSupport(){return window.RTCPeerConnection&&window.RTCIceCandidate&&window.RTCSessionDescription&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(RTCPeerConnection.prototype.addStream||RTCPeerConnection.prototype.addTrack)?!0:!1}function requestFullscreen(a){a=a||document.documentElement,a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()}window.onerror=function(a,b,c,d){"undefined"==typeof _gaq&&(_gaq=[]),_gaq.push(["_trackEvent","JSerror",b+":"+c+":"+d,a+""])},top.location!=document.location&&(top.location.href=document.location.href);var doStartFlash=Math.random()<.5,IE_URL_MAX_LENGTH=2e3;"undefined"==typeof IS_MOBILE&&(IS_MOBILE=!1);var splitDomain=document.domain.split(".");splitDomain.length>1&&(document.domain=splitDomain[splitDomain.length-2]+"."+splitDomain[splitDomain.length-1]);var collegeJustEnabled=!1;"#dormon"===window.location.hash&&(collegeJustEnabled=!0,window.location.hash="#",window.location.hash="");var aurrp=Cookie.read("aurrp");aurrp=null===aurrp?!0:"1"===aurrp;var shouldUseLikes=Cookie.read("uselikes");shouldUseLikes=null===shouldUseLikes?!0:"1"===shouldUseLikes;var shouldUseEnglish=Cookie.read("useenglish");shouldUseEnglish=null===shouldUseEnglish?!1:"1"===shouldUseEnglish;var randID=Cookie.read("randid");randID&&8===randID.length||(randID=function(){for(var a="23456789ABCDEFGHJKLMNPQRSTUVWXYZ",b="",c=0;8>c;c++){var d=Math.floor(Math.random()*a.length);b+=a.charAt(d)}return b}()),Cookie.write("randid",randID,{duration:365,domain:document.domain,path:"/"});var collegeAndAuth=Cookie.read("college");collegeAndAuth?(Cookie.write("college",collegeAndAuth,{duration:365,domain:document.domain,path:"/"}),collegeAndAuth=JSON.decode(collegeAndAuth),("object"!=typeof collegeAndAuth||null===collegeAndAuth||2!==collegeAndAuth.length)&&(collegeAndAuth=null)):collegeAndAuth=null;var collegeMode=Cookie.read("collegemode");"my"!==collegeMode&&"any"!==collegeMode&&"none"!==collegeMode&&(collegeMode="any");var shouldUseFbLikes,firstChatTrackCode=null,contentTop,logoElt,likeButtonElement=null,newChatButton=new Element("img",{width:170,height:50,alt:"New chat",styles:{cursor:"pointer","vertical-align":"middle"}});window.devicePixelRatio&&window.devicePixelRatio>1?newChatButton.set("src","/static/newchatbtn@2x.png"):newChatButton.set("src","/static/newchatbtn.png");var unmonSexyButton=null,unmonGayButton=null;if(IS_MOBILE){var bwLogo=new Element("img",{width:77,height:16,alt:""});window.devicePixelRatio&&window.devicePixelRatio>1?bwLogo.set("src","/static/bwlogo@2x.png"):bwLogo.set("src","/static/bwlogo.png")}HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(a,b,c){var d=this.toDataURL(b,c).split(",")[1];setTimeout(function(){for(var c=atob(d),e=c.length,f=new Uint8Array(e),g=0;e>g;g++)f[g]=c.charCodeAt(g);a(new Blob([f],{type:b||"image/png"}))})}});var COMETBackend=new Class({Implements:[Options,Events],initialize:function(a){this.setOptions(a),this.clientID=null,this.stopped=!1},connect:function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=this;o.server=a,o.stratusNearID=b,o.askedQuestion=c,o.wantsSpy=d,o.canSaveQuestion=e,o.fbAccessToken=f,o.topics=g,o.group=h,o.lang=i,o.camera=j,o.enableWebRTC=k,o.college=l,o.collegeAuth=m,o.anyCollege=n,subdomainManager.subdomainWindow(a,function(a){o.reqWindow=a,o.gotReqWindow()})},resume:function(a,b){var c=this;c.server=a,c.clientID=b,subdomainManager.subdomainWindow(a,function(a){c.reqWindow=a,c.getEvents()})},gotReqWindow:function(){var a=this,b=a.stratusNearID||"",c=subdomainManager.fixUrl(a.server,"/start?caps=recaptcha2&firstevents=1&spid="+b+"&randid="+randID+(IS_MOBILE?"&m=1":""));"string"==typeof a.askedQuestion&&(c+="&ask="+encodeURIComponent(a.askedQuestion)),"string"==typeof a.fbAccessToken&&(c+="&fbaccesstoken="+encodeURIComponent(a.fbAccessToken)),a.wantsSpy&&(c+="&wantsspy=1"),a.canSaveQuestion&&(c+="&cansavequestion=1"),a.topics&&a.topics.length&&(c+="&topics="+encodeURIComponent(JSON.encode(a.topics))),a.group&&(c+="&group="+encodeURIComponent(a.group)),a.lang&&(c+="&lang="+encodeURIComponent(a.lang)),a.camera&&(c+="&camera="+encodeURIComponent(a.camera)),a.enableWebRTC&&(c+="&webrtc=1"),a.college&&(c+="&college="+encodeURIComponent(a.college)),a.collegeAuth&&(c+="&college_auth="+encodeURIComponent(a.collegeAuth)),a.anyCollege&&(c+="&any_college=1");var d=null,e=killHeaders(new a.reqWindow.Request.JSON({url:c,onSuccess:function(b){if(null!==d){if(clearTimeout(d),d=null,!b.clientID)return void a.fireEvent("permanentlyFailedToConnect");a.clientID=b.clientID,a.fireEvent("connectedToServer"),b.events&&a.gotEvents(b.events),a.getEvents()}},onFailure:function(){null!==d&&(clearTimeout(d),d=null,a.fireEvent("failedToConnect"))}}));d=setTimeout(function(){d=null,e.cancel(),a.fireEvent("failedToConnect")},1e4),e.post()},getEvents:function(a){if(void 0===a&&(a=0),!this.stopped){if(a>2){var b=this.stopped;return this.stopped=!0,void(b||this.fireEvent("connectionDied","Lost contact with server, and couldn't reach it after 3 tries."))}var c=this;if(window.useExperimental&&window.WebSocket){var d=new WebSocket("wss://"+c.server+"/wsevents?id="+encodeURIComponent(c.clientID));return d.onerror=function(b){c.stopped||c.getEvents(a+1)},d.onclose=function(b){c.stopped||c.getEvents(a+1)},void(d.onmessage=function(a){var b=JSON.parse(a.data);if(null===b){var d=c.stopped;c.stopped=!0,d||c.fireEvent("connectionPermanentlyDied","Server was unreachable for too long and your connection was lost.")}else c.gotEvents(b)})}var e=null,f=killHeaders(new c.reqWindow.Request.JSON({url:subdomainManager.fixUrl(c.server,"/events"),onSuccess:function(a){null!==e&&(clearTimeout(e),e=null,c.lastEvReq=null,c.stopped||(null===a?(c.stopped=!0,c.fireEvent("connectionPermanentlyDied","Server was unreachable for too long and your connection was lost.")):(c.gotEvents(a),c.getEvents())))},onFailure:function(){null!==e&&(clearTimeout(e),e=null,c.lastEvReq=null,c.stopped||setTimeout(function(){c.getEvents(a+1)},750))}}));f.post({id:this.clientID}),c.lastEvReq=f,e=setTimeout(function(){e=null,f.cancel(),c.getEvents(a)},7e4)}},gotEvents:function(a){var b=this;$each(a,function(a){switch(a[0]){case"waiting":b.fireEvent("waiting");break;case"connected":b.fireEvent("strangerConnected",a[1]);break;case"gotMessage":b.fireEvent("gotMessage",a[1]);break;case"strangerDisconnected":b.stopped=!0,b.fireEvent("strangerDisconnected");break;case"typing":b.fireEvent("typing");break;case"stoppedTyping":b.fireEvent("stoppedTyping");break;case"recaptchaRequired":b.fireEvent("recaptchaRequired",a[1]);break;case"recaptchaRejected":b.fireEvent("recaptchaRejected",a[1]);break;case"count":onlineCountUpdated(a[1]);break;case"spyMessage":b.fireEvent("spyMessage",[a[1],a[2]]);break;case"spyTyping":b.fireEvent("spyTyping",a[1]);break;case"spyStoppedTyping":b.fireEvent("spyStoppedTyping",a[1]);break;case"spyDisconnected":b.stopped=!0,b.fireEvent("spyDisconnected",a[1]);break;case"question":b.fireEvent("question",a[1]);break;case"serverMessage":b.fireEvent("serverMessage",a[1]);break;case"error":b.stopped=!0,b.fireEvent("error",a[1]);break;case"commonLikes":b.fireEvent("commonLikes",[a[1]]);break;case"antinudeBanned":b.stopped=!0,b.fireEvent("antinudeBanned",[a[1]]);break;case"statusInfo":gotServerStatus(a[1]);break;case"identDigests":b.fireEvent("identDigests",[a[1]]);break;case"icecandidate":b.fireEvent("icecandidate",[a[1]]);break;case"rtccall":b.fireEvent("rtccall");break;case"rtcpeerdescription":b.fireEvent("rtcpeerdescription",[a[1]]);break;case"partnerCollege":b.fireEvent("partnerCollege",[a[1]])}})},sendMessage:function(a){this.sendPOST("/send",{msg:a})},typing:function(){this.sendPOST("/typing")},stopTyping:function(){this.sendPOST("/stoppedtyping")},submitRecaptcha:function(a){this.sendPOST("/recaptcha",{response:a})},disconnect:function(){this.lastEvReq&&(this.lastEvReq.cancel(),this.lastEvReq=null),this.sendPOST("/disconnect"),this.stopped=!0},stopLookingForCommonLikes:function(){this.sendPOST("/stoplookingforcommonlikes")},sendRTCPeerDescription:function(a){this.sendPOST("/rtcpeerdescription",{desc:JSON.stringify(a)})},sendICECandidates:function(a){for(var b="id="+encodeURIComponent(this.clientID),c=0;c<a.length;c++)b+="&candidate="+encodeURIComponent(JSON.stringify(a[c]));this.sendPOST("/icecandidate",b)},sendPOST:function(a,b,c){b=b||{},c=c||0,"object"==typeof b&&(b.id=this.clientID);var d=this;killHeaders(new this.reqWindow.Request({url:subdomainManager.fixUrl(this.server,a),data:b,onFailure:function(){3>c&&d.sendPOST(a,b,c+1)}})).send()}}),MetaBackend=new Class({Implements:[Options,Events],initialize:function(a){this.setOptions(a),this.numResumes=0,this.stopped=!1,this.server=null},plugInBackend:function(){var a=["connectedToServer","waiting","strangerConnected","gotMessage","strangerDisconnected","typing","stoppedTyping","recaptchaRequired","gotMessageHTML","recaptchaRejected","spyMessage","spyTyping","spyStoppedTyping","spyDisconnected","question","error","commonLikes","antinudeBanned","serverMessage","identDigests","icecandidate","rtccall","rtcpeerdescription","partnerCollege"],b=this;$each(a,function(a){b.backend.addEvent(a,function(){("strangerDisconnected"===a||"error"===a||"spyDisconnected"===a||"antinudeBanned"===a)&&(b.stopped=b.backend.stopped),b.fireEvent(a,arguments)})}),b.backend.addEvent("connectionDied",function(){if(serverManager.unsetKnownGood(),b.backend.clientID&&b.numResumes<3&&!b.stopped){b.numResumes++;var a=b.backend.clientID;b.backend.removeEvents(),b.backend=new COMETBackend,b.plugInBackend(),b.server=serverManager.pickServer(),b.backend.resume(b.server,a)}else b.stopped=!0,b.fireEvent("connectionDied",arguments)}),b.backend.addEvent("connectionPermanentlyDied",function(){serverManager.unsetKnownGood(),b.stopped=!0,b.fireEvent("connectionDied",arguments)}),b.backend.addEvent("failedToConnect",function(){serverManager.unsetKnownGood(),b.numResumes<3?(b.numResumes++,b.backend.removeEvents(),b.connect.apply(b,b.connectArgs)):(b.stopped=!0,b.fireEvent("failedToConnect",b.backend.server))}),b.backend.addEvent("permanentlyFailedToConnect",function(){serverManager.unsetKnownGood(),b.stopped=!0,b.fireEvent("failedToConnect",b.backend.server)})},connect:function(){this.backend=new COMETBackend,this.plugInBackend(),this.server=serverManager.pickServer(),this.connectArgs=arguments;for(var a=[this.server],b=0;b<arguments.length;b++)a.push(arguments[b]);this.backend.connect.apply(this.backend,a)},sendMessage:function(a){this.backend.sendMessage(a)},typing:function(){this.backend.typing()},stopTyping:function(){this.backend.stopTyping()},disconnect:function(){this.stopped=!0,this.backend&&this.backend.disconnect()},submitRecaptcha:function(a){this.backend.submitRecaptcha(a)},stopLookingForCommonLikes:function(){this.backend.stopLookingForCommonLikes()},sendRTCPeerDescription:function(a){this.backend.sendRTCPeerDescription(a)},sendICECandidates:function(a){this.backend.sendICECandidates(a)}}),savedIntro=null,savedHeader=null,idealSpyMode=randomSpyMode(),firstStatusUpdate=!0,antinudeServers=["waw1.omegle.com","waw2.omegle.com","waw3.omegle.com"],lastScreenshotTime=null,screenshotPercent=0,shouldForceUnmonitored=!1,serverStatusTimeout=null,rtmfpServer="rtmfp://p2p.rtmfp.net",initOfFbCallbacks=[],initOfFbComplete=!1;window.fbAsyncInit=function(){FB.init({appId:"372387627273",cookie:!0,status:!0,xfbml:!0,oauth:!0,channelUrl:"http://"+document.domain+"/static/channel.html"}),initOfFbComplete=!0;for(var a=0;a<initOfFbCallbacks.length;a++)initOfFbCallbacks[a]();initOfFbCallbacks=null};var basicReadyCalled=!1;window.addEvent("domready",onReady),window.addEvent("load",onLoad);var topicManager=function(){function a(){Cookie.write("topiclist",JSON.encode(d),{duration:365,domain:document.domain,path:"/"})}function b(a){return a.toLowerCase().replace(/[^a-zA-Z0-9]/g,"")}function c(a){for(var c=b(a),e=0;e<d.length;e++)if(b(d[e])===c)return!0;return!1}var d=[],e=Cookie.read("topiclist");return e&&(d=JSON.decode(e)),a(),{list:function(){return d},add:function(e){var f=b(e);return f?c(e)?!1:(d.push(e),a(),!0):!1},remove:function(c){for(var e=b(c),f=0;f<d.length;f++)if(b(d[f])===e)return d.splice(f,1),a(),!0;return!1},normalize:b,check:c}}(),subdomainManager=function(){function a(a){var b=new Element("iframe",{src:"//"+a+"/static/xhrframe.html",width:0,height:0,frameBorder:0});b.setStyle("display","none"),$(document.body).grab(b)}var b={},c={};return{subdomainWindow:function(d,e){void 0!==Browser.Request().withCredentials?e(window):b[d]?e(b[d]):(c[d]?c[d].push(e):c[d]=[e],a(d))},fixUrl:function(a,b){return void 0!==Browser.Request().withCredentials?"//"+a+b:b},iframeLoaded:function(a,d){if(!b[a]&&(b[a]=d,c[a])){for(var e=0;e<c[a].length;e++){var f=c[a][e];f(d)}delete c[a]}}}}(),serverManager=function(){var a=[],b=null,c=null,d={setKnownGood:function(a){b=a?a:c,b=c},unsetKnownGood:function(){b=null},pickServer:function(){if(null!==b&&-1!==a.indexOf(b))return b;for(;;){var d=a.shift();if(a.push(d),!(/^front([1-9]|10)\./.test(d)&&Math.random()<.333))break}return c=d,d},setServerList:function(b){function c(a){var b,c,d;for(b=1;b<a.length;b++)c=Math.floor(Math.random()*(1+b)),c!=b&&(d=a[b],a[b]=a[c],a[c]=d)}for(var d=!1,e=0;e<b.length;e++)-1===b[e].indexOf(".")&&(b[e]=b[e]+".omegle.com");c(b);for(var e=0;e<b.length;e++){var f=b[e];-1===a.indexOf(f)&&(d=!0,a.splice(Math.floor(Math.random()*(a.length+1)),0,f))}d&&this.unsetKnownGood();for(var e=0;e<a.length;e++){var f=a[e];-1===b.indexOf(f)&&a.splice(e,1)}}};return d.setServerList(["front1","front2","front3","front4","front5","front7","front8","front9","front10","front11","front12","front13","front14","front15","front17","front18","front19","front20","front22","front23","front24","front25","front26","front27","front28","front29","front30","front31","front32"]),d}(),timeManager=function(){var a=0;return{now:function(){var b=new Date;return b.setTime(b.getTime()+a),b},gotAccurateTime:function(b){var c=new Date;a=b-c}}}(),flashingInterval=null,lastCoords=null,spinnerPossible=!1,mobileAdWrapper=null,mobileAdWrapperSize=null,currentAffiliate=null,isFirstChat=!0,chatOddEven=!0,chatPervTrack=[],logoShadowImg,totalVideoChatsStarted=0,userMedia=null,WEB_RTC_CONFIG={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun.services.mozilla.com"}]},WEB_RTC_MEDIA_CONSTRAINTS={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},WEB_RTC_PEER_CONSTRAINTS={optional:[{DtlsSrtpKeyAgreement:!0}]},logoShadowImg=null;